!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(v){var e,i=v(window).width(),n=v(window).height(),o=[];v(window).resize(function(){clearTimeout(e),e=setTimeout(function(){v(window).width()===i&&v(window).height()===n||(v(o).each(function(){v(this).seekoFlexMenu({undo:!0}).seekoFlexMenu(this.options)}),i=v(window).width(),n=v(window).height())},200)}),v.fn.seekoFlexMenu=function(e){var i,M=v.extend({threshold:2,cutoff:2,linkText:"More",linkTitle:"View More",linkTextAll:"Menu",linkTitleAll:"Open/Close Menu",shouldApply:function(){return!0},showOnHover:!0,popupAbsolute:!0,popupClass:"",undo:!1},e);return this.options=M,0<=(i=v.inArray(this,o))?o.splice(i,1):o.push(this),this.each(function(){var e,i,n,o,l,t,u=v(this),a=u.find("> li"),s=a.first(),d=a.last(),f=a.length,r=Math.floor(s.offset().top),p=Math.floor(s.outerHeight(!0)),h=!1;function c(e){return Math.ceil(e.offset().top)>=r+p}if(c(d)&&f>M.threshold&&!M.undo&&u.is(":visible")&&M.shouldApply()){var w=v('<ul class="flexMenu-popup submenu"></ul>');for(w.addClass(M.popupClass),t=f;1<t;t--){if(i=c(e=u.find("> li:last-child")),t-1<=M.cutoff){v(u.children().get().reverse()).appendTo(w),h=!0;break}if(!i)break;e.appendTo(w)}h?u.append('<li class="flexMenu-viewMore flexMenu-allInPopup has-submenu"><a data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" href="#" title="'+M.linkTitleAll+'">'+M.linkTextAll+"</a></li>"):u.append('<li class="flexMenu-viewMore has-submenu"><a href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="'+M.linkTitle+'">'+M.linkText+"</a></li>"),c(n=u.find("> li.flexMenu-viewMore"))&&u.find("> li:nth-last-child(2)").appendTo(w),w.children().each(function(e,i){w.prepend(i)}),n.append(w),u.find("> li.flexMenu-viewMore > a").on("tap",function(e){return function(e){v("li.flexMenu-viewMore.active").not(e).removeClass("active").find("> ul").hide()}(n),w.toggle(),n.toggleClass("active"),e.preventDefault(),!1}),M.showOnHover&&"undefined"!=typeof Modernizr&&!Modernizr.touch&&n.on("mouseenter",function(){w.show(),v(this).addClass("active")}).on("mouseleave",function(){w.hide(),v(this).removeClass("active")})}else if(M.undo&&u.find("ul.flexMenu-popup")){for(o=(l=u.find("ul.flexMenu-popup")).find("li").length,t=1;t<=o;t++)l.find("> li:first-child").appendTo(u);l.remove(),u.find("> li.flexMenu-viewMore").remove()}})}});